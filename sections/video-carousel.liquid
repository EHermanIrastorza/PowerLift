{% schema %}
{
  "name": "Video Carousel",
  "class": "section",
  "settings": [
    {
      "type": "select",
      "id": "title_tag",
      "label": "Title Tag",
      "options": [
        { "value": "h1", "label": "H1" },
        { "value": "h2", "label": "H2" },
        { "value": "h3", "label": "H3" },
        { "value": "h4", "label": "H4" }
      ],
      "default": "h2"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default": "Video Carousel"
    },
    {
      "type": "range",
      "id": "font_size",
      "label": "Font Size",
      "min": 12,
      "max": 48,
      "step": 1,
      "default": 24,
      "unit": "px"
    },
    {
      "type": "checkbox",
      "id": "bold",
      "label": "Bold"
    },
    {
      "type": "checkbox",
      "id": "italic",
      "label": "Italic"
    },
    {
      "type": "color",
      "id": "title_color",
      "label": "Title Color",
      "default": "#000000"
    }
  ],
  "blocks": [
    {
      "type": "video",
      "name": "Video Block",
      "settings": [
        {
          "type": "url",
          "id": "video_upload",
          "label": "Upload MP4 Video URL"
        },
        {
          "type": "url",
          "id": "video_url",
          "label": "Video URL",
          "default": ""
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Video Carousel",
      "blocks": [
        { "type": "video" },
        { "type": "video" }
      ]
    }
  ]
}
{% endschema %}

<div class="video-carousel">
  {% assign title_tag = section.settings.title_tag %}
  <{{ title_tag }} style="
    font-size: {{ section.settings.font_size }}px;
    color: {{ section.settings.title_color }};
    {% if section.settings.bold %}font-weight: bold;{% endif %}
    {% if section.settings.italic %}font-style: italic;{% endif %}
  ">
    {{ section.settings.title }}
  </{{ title_tag }}>
  
  <div class="video-container">
    {% for block in section.blocks %}
      <div class="video-slide" {{ block.shopify_attributes }}>
        {% if block.settings.video_upload %}
          <video controls>
            <source src="{{ block.settings.video_upload }}" type="video/mp4">
            Your browser does not support the video tag.
          </video>
        {% elsif block.settings.video_url %}
          <video controls>
            <source src="{{ block.settings.video_url }}" type="video/mp4">
            Your browser does not support the video tag.
          </video>
        {% else %}
          <div class="placeholder">Video Placeholder</div>
        {% endif %}
      </div>
    {% endfor %}
  </div>
</div>
